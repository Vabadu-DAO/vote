import{u as y,a as d,b as F,c as h,j as o,F as f,d as M,e as v,S as m,B as A,T as b,f as S,g as D,_ as L,h as P,i as E,L as R,k as w,l as p,M as V}from"./index-21e7f19c.js";function C(){const e=y(B),{daoAddress:n}=d(),s=F(n).data,t=h({initialValues:{ownerAddress:(s==null?void 0:s.daoRoles.owner)||"",proposalOwner:(s==null?void 0:s.daoRoles.proposalOwner)||""},validateOnChange:!1,validateOnBlur:!0,onSubmit:()=>{}});return o(f,{form:e,formik:t})}const B=({name:e,formik:n})=>{const{mutateAsync:s,isLoading:t}=M(),{mutateAsync:i,isLoading:r}=v(),a=n.values[e],u=n.initialValues[e],c=()=>{const l={newOwner:a,onError:O=>n.setFieldError(e,O)};if(e==="ownerAddress")return s(l);if(e==="proposalOwner")return i(l)},g=e==="ownerAddress"?t:r;return u===a?null:o(m,{children:o(A,{onClick:c,isLoading:g,children:o(b,{children:"Update"})})})},Q=()=>({title:"Dao Admin Settings",inputs:[{name:"fwdMsgFee",label:"Forward Message Fee",type:"number",EndAdornment:k}]});function j(){const e=Q(),{daoAddress:n}=d(),{data:s}=S(n),t=h({enableReinitialize:!0,initialValues:{fwdMsgFee:Number(s==null?void 0:s.fwdMsgFee)},validateOnChange:!1,validateOnBlur:!0,onSubmit:()=>{}});return o(f,{form:e,formik:t})}const k=({name:e,formik:n})=>{const{daoAddress:s}=d(),t=n.values[e],i=n.initialValues[e],r=F(s).data,{mutate:a,isLoading:u}=D(),{refetch:c}=S(r==null?void 0:r.daoAddress),g=()=>{if(e==="fwdMsgFee")return a({daoIds:[r.daoId],amount:t,onError:l=>n.setFieldError(e,l),onSuccess:c})};return!L.isNumber(t)||i===t?null:o(m,{children:o(A,{onClick:g,isLoading:u,children:o(b,{children:"Update"})})})};function I(){const e=P(),{daoAddress:n}=d(),{isLoading:s,data:t}=F(n),{isOwner:i,isProposalPublisher:r}=E(t==null?void 0:t.daoRoles),a=i||r;return o(R,{title:e.settings,isLoading:s,children:w(p,{children:[o(j,{}),a&&w(p,{children:[o(C,{}),o(V,{})]})]})})}export{I as DaoSettings,I as default};
